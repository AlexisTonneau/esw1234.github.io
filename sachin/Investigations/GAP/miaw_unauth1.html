


<html>
<head>
	<title>MIAW-Unauth</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
</head>
<body>
	<h1>MIAW - Unauth </h1>
	<p><a id="editThisPageLink" target="_blank" style="color:blue">Edit this page</a></p>
	<script>document.getElementById('editThisPageLink').href = "https://github.com/ESW1234/esw1234.github.io/edit/master" + window.location.pathname;</script>

	<script "text/javascript">
		window.addEventListener("onEmbeddedMessagingReady", () => {
			// Embedded Messaging app ready
			console.log("onEmbeddedMessagingReady event received");
		});

		window.addEventListener("onEmbeddedMessagingInitSuccess", () => {
			console.log("Received 'onEmbeddedMessagingInitSuccess' event");
		});

		window.addEventListener("onEmbeddedMessagingInitError", () => {
			console.log("Received 'onEmbeddedMessagingInitError' event");
		});

		window.addEventListener("message", (event) => {
	     		if (event.data && event.data.eventName === "request_hidden_prechat_fields") {
		     		console.log("Received request_hidden_prechat_fields event");
	     		}
 		});
	</script>

	<script type='text/javascript'>
    window.addEventListener("message", (event) => {
          if (event.data && event.data.eventName === "request_hidden_prechat_fields") {
              console.log("Received request_hidden_prechat_fields event");
              
              let miaw_chat_iframe = document.getElementById("embeddedMessagingFrame");
              miaw_chat_iframe.contentWindow.postMessage(
                  {
                      "eventName": "receive_hidden_prechat_fields",
                      "data": {"UnknownShopperId": "123", "Market": "Men_Hoodies"}
                  },
                  'https://gapinc--dropship.sandbox.my.site.com/ESWJPMIAW1724221117133'
              );
          }
    });

		function initEmbeddedMessaging() {
			try {
				embeddedservice_bootstrap.settings.language = 'en'; // For example, enter 'en' or 'en-US'
				embeddedservice_bootstrap.settings.devMode = true;

				embeddedservice_bootstrap.init(
          '00DEa000004UAsT',
          'JP_MIAW',
          'https://gapinc--dropship.sandbox.my.site.com/ESWJPMIAW1724221117133',
          {
            scrt2URL: 'https://gapinc--dropship.sandbox.my.salesforce-scrt.com'
          }
        );
			} catch (err) {
				console.error('Error loading Embedded Messaging: ', err);
			}
		};
	</script>
	<script type='text/javascript' src='https://gapinc--dropship.sandbox.my.site.com/ESWJPMIAW1724221117133/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>
