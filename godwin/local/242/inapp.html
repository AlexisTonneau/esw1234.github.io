<html>
   <head>
       <title>Local 242/patch Messaging page</title>
       <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0">
   </head>
   <body>
	<button type="button" id="clearAuthBtn" onclick="clearAuthSession()"> Clear Authorization Session </button>

	<script type='text/javascript'>
		function clearAuthSession() {
			console.log("Clearing user session.");
			embeddedservice_bootstrap.userVerificationAPI.clearSession();
		}
		
		window.addEventListener("onEmbeddedMessagingReady", () => {
			console.log("onEmbeddedMessagingReady emitted");

			// Setting identity token
			console.log("Setting identity token.");
			embeddedservice_bootstrap.userVerificationAPI.setIdentityToken({
				"identityTokenType":"JWT",
				// Expired JWT
				// "identityToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJleHAiOjE2NjQzODc4OTd9.XQCMxR4KkGEbPNIUu6optJBWzop4QhGKSKtZ-mscV0A",
				// Valid JWT
				"identityToken": "\
					eyJraWQiOiI3OWJmNGY0ODRkYmVlODc1NzU1MWI1ODkwOGEyNzU5Y2Y0OGFiODRlOGRkM2QzZWFkNmJlMmUyYWJiMTk0YjA5IiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiJ2MS9pYW1lc3NhZ2UvVU5BVVRIL2YyYTdlN2M4LTNlZmMtNGNjNi04NmI4LTFiMzUyYTkyOTkzOC91aWQ6NTg0NjIzNzUtMWJiMi00OGUzLWIwMzMtOGQ4MTJkMmI5NDcyIiwiY2xpZW50SWQiOiJ2MS9NSUFXX1VuYXV0aC9jZjk3NDJlOS1kZDQ2LTQzMzEtODdmMC01OGNiMWFhNTY2ODciLCJpc3MiOiJpYW1lc3NhZ2UiLCJkZXZpY2VJZCI6IjA2NzJkNmZjLTUzYTEtNDJhYy04ZmI5LTQxNTFiNzM1NDBhMyIsImNhcGFiaWxpdGllc1ZlcnNpb24iOiIyNDAiLCJvcmdJZCI6IjAwRFNCMDAwMDAwNHN0MyIsImRldmljZUluZm8iOiJ7fSIsImp3dElkIjoiNG12WGhSQjdTNnpJY2xBMVlQWFZfRiIsImNsaWVudFNlc3Npb25JZCI6ImE3ZGU5MjE0LTVkZTAtNDA4My05YjQyLTZmNTMzNDhiMTdiMCIsImF1ZCI6IlVTRVIiLCJldnRLZXkiOiJzY3J0LnRlc3QuZXZlbnRyb3V0ZXJfX2F3cy50ZXN0MS11c3dlc3QyLnVuaWZpZWQtZW5nYWdlbWVudC5ham5hbG9jYWwxX19wdWJsaWMuZXZlbnRzLnNjcnQwMTo3NiIsImp3a3NfdXJpIjoiaHR0cHM6Ly9zY3J0MDEudW5pZmllZC1lbmdhZ2VtZW50LnNmZGMtY2t6cWdjLnN2Yy5zZmRjZmMubmV0L2lhbWVzc2FnZS92MS8ud2VsbC1rbm93bi9qd2tzLmpzb24_a2V5SWQ9NzliZjRmNDg0ZGJlZTg3NTc1NTFiNTg5MDhhMjc1OWNmNDhhYjg0ZThkZDNkM2VhZDZiZTJlMmFiYjE5NGIwOSIsImVzRGVwbG95bWVudFR5cGUiOiJXZWIiLCJleHAiOjE2NzA1NDMzODIsImlhdCI6MTY3MDUyMTc4Mn0.Mq2zstGvQqlAU7yAq3uG7JCjbgnamuK1UVzZ0QEyd11hmN2dz1eVoIvE9y4dHZO9Gg1GUMI0iK3COESS5T_sBj8Y3rVoCXwoy6DPTkWZqG2K51O2qJmIhLDawyEWnWfSfTSz4Y5UU9rgc3gkrKdV7CooxJi2g1sxzcufdo3itC_XGUDq0EHK52IQ23z2sb4D1iLAmQxxc1axVJL5cY510nCTWPXm6REc6yi0RuVnBUPbl1aLjGsdnfQMRWPA44GP4k-liWLdRjPDcAieU1X_fVKu7fhBxDyFwe3ba8EiPnAXyPQaKI22lqSQ7iYxjn3E9MdlHAwdU30clQ8xaK3-Vg \
				",
			});
		});
	  </script>
	<script type='text/javascript'>
		function initEmbeddedMessaging() {
			try {
				embeddedservice_bootstrap.settings.language = 'en'; // For example, enter 'en' or 'en-US'
				embeddedservice_bootstrap.settings.devMode = true; 
				

				embeddedservice_bootstrap.init(
					'00DSB0000004st3',
					'MIAW_Local',
					'https://godwinlaw.my.localhost.sfdcdev.site.com:6101/ESWMIAW1669750683619',
					{
						scrt2URL: 'https://godwinlaw-sdb3.test1.my.pc-rnd.salesforce-scrt.com'
					}
				);
			} catch (err) {
				console.error('Error loading Embedded Messaging: ', err);
			}
		};
	</script>
	<!--
	<script type='text/javascript' src='https://godwinlaw-sdb3.test1.pc-rnd.force.com/ESWMIAWLocal1669917994477/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
	-->	
	<script type='text/javascript' src='https://godwinlaw.my.localhost.sfdcdev.site.com:6101/ESWMIAW1669750683619/assets/js/bootstrap.js' onload='initEmbeddedMessaging()'></script>   </body>
</html>
