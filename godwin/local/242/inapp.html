<html>
   <head>
       <title>Local 242/patch Messaging page</title>
       <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0">
   </head>
   <body>
	<button type="button" id="clearAuthBtn" onclick="clearAuthSession()"> Clear Authorization Session </button>

	<script type='text/javascript'>
		function clearAuthSession() {
			console.log("Clearing authorization session.");
			embeddedservice_bootstrap.authAPI.clearAuthorizationSession();
		}
		
		window.addEventListener("onEmbeddedMessagingReady", () => {
			console.log("onEmbeddedMessagingReady emitted");

			// Setting identity token
			console.log("Setting expired token.");
			embeddedservice_bootstrap.userVerificationAPI.setIdentityToken({
				"identityTokenType":"JWT",
				// Expired JWT
				// "identityToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJleHAiOjE2NjQzODc4OTd9.XQCMxR4KkGEbPNIUu6optJBWzop4QhGKSKtZ-mscV0A",
				// Valid JWT
				"identityToken": "eyJraWQiOiIwMzZiM2VlNTBiYTg5ODJhNDNkZmU0MTlmYzhiOTJhNmFmNDhhYTNkZmZkN2RmZDNmMThjZmYyMTUxMTZiYjY5IiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiJ2MS9pYW1lc3NhZ2UvVU5BVVRILzRhOWU4N2E1LWM5MWEtNDhkMy04NjUxLTU0YjdlOTQwYzcyMi91aWQ6ZDExMzNhYmMtOTE4Yy00NDZjLTk1ZWYtNWQyODA5MWY1MTdmIiwiY2xpZW50SWQiOiJ2MS9NSUFXX0xvY2FsLzFmMTBlNTJhLWQ5NGItNDBlZS05YTY3LTVkNGEwOTQxNzc2YyIsImlzcyI6ImlhbWVzc2FnZSIsImRldmljZUlkIjoiMjZmZGU4ZmYtYTAxNC00ZDIyLTgzZDgtMDdiMDVmMTAzNzk0IiwiY2FwYWJpbGl0aWVzVmVyc2lvbiI6IjI0MCIsIm9yZ0lkIjoiMDBEU0IwMDAwMDA0c3QzIiwiZGV2aWNlSW5mbyI6IntcIm9zXCI6XCJNYWNpbnRvc2hcIixcIm9zVmVyc2lvblwiOlwiMTAuMTU3XCIsXCJicm93c2VyXCI6XCJDaHJvbWVcIixcImJyb3dzZXJWZXJzaW9uXCI6XCIxMDdcIn0iLCJqd3RJZCI6IjRtdC1EUG1FMU5GaWIzUWhGb0dOU2siLCJjbGllbnRTZXNzaW9uSWQiOiIxYmViNmNmYy1mN2EwLTRkMmMtYjIyNy1iNDdkOGM0NTk5ODEiLCJhdWQiOiJVU0VSIiwiZXZ0S2V5Ijoic2NydC50ZXN0LmV2ZW50cm91dGVyX19hd3MudGVzdDEtdXN3ZXN0Mi51bmlmaWVkLWVuZ2FnZW1lbnQuYWpuYWxvY2FsMV9fcHVibGljLmV2ZW50cy5zY3J0MDE6MzMiLCJqd2tzX3VyaSI6Imh0dHBzOi8vc2NydDAxLnVuaWZpZWQtZW5nYWdlbWVudC5zZmRjLWNrenFnYy5zdmMuc2ZkY2ZjLm5ldC9pYW1lc3NhZ2UvdjEvLndlbGwta25vd24vandrcy5qc29uP2tleUlkPTAzNmIzZWU1MGJhODk4MmE0M2RmZTQxOWZjOGI5MmE2YWY0OGFhM2RmZmQ3ZGZkM2YxOGNmZjIxNTExNmJiNjkiLCJlc0RlcGxveW1lbnRUeXBlIjoiV2ViIiwiZXhwIjoxNjcwMzY0NzI4LCJpYXQiOjE2NzAzNDMxMjh9.BCF7z_FJKhpN2kMDjby88vG42MY9O6VD-u9LQ4y35YIic685KeKLQ83q6RSDuMqKHFf2o0-upmqFF5e-M9DC_IrmR3O4qA3HFojZTmoBKWxWLQc2JQuDX1nA_4K7kXitC_iAQyYHj_WPwfxHHUur9NRP45FLBvbnsReN3ULOWzHKFr2WbD-PzvbqD6xdz7_IURu89LIUt5uv9D5gsuTjUSZlQ-itsk56ot_unyyT9BqbR_GWIhBnPLqnMWldfzE6QSEs2xFG2QpSdyBo94WacVmE9mKccN9300YLNAq0Fwb5dSd8gXg08flMyjJBlogMOh5qC4S9ACfwl-Ls6Ofzyg",
			});
		});
	  </script>
	<script type='text/javascript'>
		function initEmbeddedMessaging() {
			try {
				embeddedservice_bootstrap.settings.language = 'en'; // For example, enter 'en' or 'en-US'
				embeddedservice_bootstrap.settings.devMode = true; 
				

				embeddedservice_bootstrap.init(
					'00DSB0000004st3',
					'MIAW_Local',
					'https://godwinlaw.my.localhost.sfdcdev.site.com:6101/ESWMIAW1669750683619',
					{
						scrt2URL: 'https://godwinlaw-sdb3.test1.my.pc-rnd.salesforce-scrt.com'
					}
				);
			} catch (err) {
				console.error('Error loading Embedded Messaging: ', err);
			}
		};
	</script>
	<!--
	<script type='text/javascript' src='https://godwinlaw-sdb3.test1.pc-rnd.force.com/ESWMIAWLocal1669917994477/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
	-->	
	<script type='text/javascript' src='https://godwinlaw.my.localhost.sfdcdev.site.com:6101/ESWMIAW1669750683619/assets/js/bootstrap.js' onload='initEmbeddedMessaging()'></script>   </body>
</html>
